(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63e9dc9e"],{"1dde":function(e,t,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},2763:function(e,t,c){"use strict";c("55f8")},"55f8":function(e,t,c){},8418:function(e,t,c){"use strict";var n=c("a04b"),a=c("9bf2"),o=c("5c6c");e.exports=function(e,t,c){var r=n(t);r in e?a.f(e,r,o(0,c)):e[r]=c}},"99af":function(e,t,c){"use strict";var n=c("23e7"),a=c("da84"),o=c("d039"),r=c("e8b5"),l=c("861d"),i=c("7b0b"),s=c("07fa"),d=c("8418"),u=c("65f0"),m=c("1dde"),b=c("b622"),f=c("2d00"),p=b("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",V=a.TypeError,h=f>=51||!o((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),v=m("concat"),N=function(e){if(!l(e))return!1;var t=e[p];return void 0!==t?!!t:r(e)},E=!h||!v;n({target:"Array",proto:!0,forced:E},{concat:function(e){var t,c,n,a,o,r=i(this),l=u(r,0),m=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?r:arguments[t],N(o)){if(a=s(o),m+a>O)throw V(j);for(c=0;c<a;c++,m++)c in o&&d(l,m,o[c])}else{if(m>=O)throw V(j);d(l,m++,o)}return l.length=m,l}})},b0c0:function(e,t,c){var n=c("83ab"),a=c("5e77").EXISTS,o=c("e330"),r=c("9bf2").f,l=Function.prototype,i=o(l.toString),s=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=o(s.exec),u="name";n&&!a&&r(l,u,{configurable:!0,get:function(){try{return d(s,i(this))[1]}catch(e){return""}}})},b789:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a=function(e){return Object(n["pushScopeId"])("data-v-09c171a2"),e=e(),Object(n["popScopeId"])(),e},o={class:"cart"},r=a((function(){return Object(n["createElementVNode"])("div",{class:"cover"},null,-1)})),l={class:"container mt-5"},i=a((function(){return Object(n["createElementVNode"])("h2",null,"購物車列表",-1)})),s={class:"mt-4"},d={class:"text-end"},u={class:"table align-middle"},m=a((function(){return Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th"),Object(n["createElementVNode"])("th",null,"品名"),Object(n["createElementVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(n["createElementVNode"])("th",null,"單價")])],-1)})),b=a((function(){return Object(n["createElementVNode"])("tr",null,null,-1)})),f=["onClick"],p={key:0,class:"text-success"},O={class:"input-group input-group-sm"},j={class:"input-group mb-3"},V=["onUpdate:modelValue","onBlur"],h={class:"input-group-text",id:"basic-addon2"},v={class:"text-end"},N={key:0,class:"text-success"},E=a((function(){return Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1)})),g={class:"text-end"},x={key:0},y=a((function(){return Object(n["createElementVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1)})),C={class:"text-end text-success"},k={class:"my-5 row justify-content-center"},B={class:"mb-3"},w=a((function(){return Object(n["createElementVNode"])("label",{for:"email",class:"form-label"},"Email",-1)})),D={class:"mb-3"},S=a((function(){return Object(n["createElementVNode"])("label",{for:"name",class:"form-label"},"收件人姓名",-1)})),q={class:"mb-3"},_=a((function(){return Object(n["createElementVNode"])("label",{for:"tel",class:"form-label"},"收件人電話",-1)})),T={class:"mb-3"},U=a((function(){return Object(n["createElementVNode"])("label",{for:"address",class:"form-label"},"收件人地址",-1)})),$={class:"mb-3"},A=a((function(){return Object(n["createElementVNode"])("label",{for:"message",class:"form-label"},"留言",-1)})),F=a((function(){return Object(n["createElementVNode"])("div",null,[Object(n["createElementVNode"])("button",{class:"btn btn-success"},"送出訂單")],-1)}));function I(e,t,c,a,I,z){var M=Object(n["resolveComponent"])("Field"),R=Object(n["resolveComponent"])("ErrorMessage"),J=Object(n["resolveComponent"])("Form");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[r,Object(n["createElementVNode"])("div",l,[i,Object(n["createElementVNode"])("div",s,[Object(n["createElementVNode"])("div",d,[Object(n["createElementVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[0]||(t[0]=function(){return z.deleteCartAll&&z.deleteCartAll.apply(z,arguments)})}," 清空購物車 ")]),Object(n["createElementVNode"])("table",u,[m,Object(n["createElementVNode"])("tbody",null,[I.cartData.carts?(Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:0},[b,(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(I.cartData.carts,(function(e){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:e.id},[Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return z.deleteCart(e)}}," x ",8,f)]),Object(n["createElementVNode"])("td",null,[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.product.title)+" ",1),e.coupon?(Object(n["openBlock"])(),Object(n["createElementBlock"])("div",p," 已套用優惠券 ")):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("div",O,[Object(n["createElementVNode"])("div",j,[Object(n["withDirectives"])(Object(n["createElementVNode"])("input",{"onUpdate:modelValue":function(t){return e.qty=t},onBlur:function(t){return z.updateCart(e)},min:"1",type:"number",class:"form-control"},null,40,V),[[n["vModelText"],e.qty,void 0,{number:!0}]]),Object(n["createElementVNode"])("span",h,Object(n["toDisplayString"])(e.product.unit),1)])])]),Object(n["createElementVNode"])("td",v,[e.final_total!=e.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("small",N,"折扣價：")):Object(n["createCommentVNode"])("",!0),Object(n["createTextVNode"])(" "+Object(n["toDisplayString"])(e.final_total),1)])])})),128))],64)):Object(n["createCommentVNode"])("",!0)]),Object(n["createElementVNode"])("tfoot",null,[Object(n["createElementVNode"])("tr",null,[E,Object(n["createElementVNode"])("td",g,Object(n["toDisplayString"])(I.cartData.total),1)]),I.cartData.final_total!=I.cartData.total?(Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",x,[y,Object(n["createElementVNode"])("td",C,Object(n["toDisplayString"])(I.cartData.final_total),1)])):Object(n["createCommentVNode"])("",!0)])])]),Object(n["createElementVNode"])("div",k,[Object(n["createVNode"])(J,{ref:"form",class:"col-md-6",onSubmit:z.submitOrder},{default:Object(n["withCtx"])((function(e){var c=e.errors;return[Object(n["createElementVNode"])("div",B,[w,Object(n["createVNode"])(M,{id:"email",name:"email",type:"email",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:I.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return I.form.user.email=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(R,{name:"email",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",D,[S,Object(n["createVNode"])(M,{id:"name",name:"姓名",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:I.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return I.form.user.name=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(R,{name:"姓名",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",q,[_,Object(n["createVNode"])(M,{id:"tel",name:"電話",type:"tel",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["電話"]}]),placeholder:"請輸入電話",rules:"required|min:8|max:10",modelValue:I.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return I.form.user.tel=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(R,{name:"電話",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",T,[U,Object(n["createVNode"])(M,{id:"address",name:"地址",type:"text",class:Object(n["normalizeClass"])(["form-control",{"is-invalid":c["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:I.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return I.form.user.address=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(R,{name:"地址",class:"invalid-feedback"})]),Object(n["createElementVNode"])("div",$,[A,Object(n["withDirectives"])(Object(n["createElementVNode"])("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[5]||(t[5]=function(e){return I.form.message=e})},null,512),[[n["vModelText"],I.form.message]])]),F]})),_:1},8,["onSubmit"])])])])}c("99af");var z=c("4dcd"),M={data:function(){return{cartData:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var e=this;z["a"].emit("loading");var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/cart");this.$http.get(t).then((function(t){z["a"].emit("un-loading"),e.cartData=t.data.data})).catch((function(e){z["a"].emit("un-loading"),alert("CART ERROR"),console.dir(e)}))},test:function(e){alert("change.!"),console.log("test",e)},updateCart:function(e){var t=this;z["a"].emit("loading");var c={product_id:e.id,qty:e.qty},n="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/cart/").concat(e.id);this.$http.put(n,{data:c}).then((function(){t.getCart()})).catch((function(e){console.dir(e),z["a"].emit("un-loading")}))},deleteCart:function(e){var t=this;z["a"].emit("loading");var c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/cart/").concat(e.id);this.$http.delete(c).then((function(){t.getCart()})).catch((function(e){console.dir(e),z["a"].emit("un-loading")}))},deleteCartAll:function(){var e=this;z["a"].emit("loading");var t="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/carts");this.$http.delete(t).then((function(){e.getCart()})).catch((function(e){console.dir(e),z["a"].emit("un-loading")}))},submitOrder:function(){var e=this,t=this.form,c="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("farmerlin731","/order");this.$http.post(c,{data:t}).then((function(t){alert(t.data.message),e.$router.push("/orders/".concat(t.data.orderId))})).catch((function(t){alert(t.data.message),e.getCart()}))},testOrder:function(){console.log("submit - ",this.form)}},mounted:function(){this.getCart()}},R=(c("2763"),c("6b0d")),J=c.n(R);const L=J()(M,[["render",I],["__scopeId","data-v-09c171a2"]]);t["default"]=L}}]);
//# sourceMappingURL=chunk-63e9dc9e.a53f340b.js.map